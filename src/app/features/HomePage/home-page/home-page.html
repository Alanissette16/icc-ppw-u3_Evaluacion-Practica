<section class="p-6 max-w-7xl mx-auto">

  <app-hero-pokemon
    [pokemoncount]="pokemonCount()" 
    [totalPages]="totalPages()"
    [currentPage]="currentPage()"
  ></app-hero-pokemon>

  <h2 class="text-3xl font-bold mb-6 text-center text-gray-800">Listado de Pokémon</h2>
  <div class="mb-8 border-t border-gray-200 pt-4"></div>

  @if (pokemons.isLoading()) {
    <div class="flex justify-center items-center h-40">
      <span class="loading loading-spinner loading-lg text-primary"></span>
    </div>
  }

  @if (pokemons.value(); as data) {
    <ul class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
      @for (item of data.results; track item.name) {
        <li class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow">
          <article class="card-body p-4 text-center">

            <!-- Imagen añadida -->
            <img 
              [src]="getPokemonImage(item.url)"
              [alt]="item.name"
              class="w-24 h-24 object-contain mx-auto mb-3"
            />

            <header>
              <h3 class="card-title justify-center capitalize text-lg text-gray-700">
                {{ item.name }}
              </h3>
            </header>

            <div class="card-actions justify-center mt-4">
              <button 
                class="btn btn-primary w-full"
                (click)="goToDetail(item.url)">
                Ver detalles
              </button>
            </div>

          </article>
        </li>
      }
    </ul>

    <!-- PAGINACIÓN CORREGIDA -->
    <footer class="flex justify-between items-center mt-8 p-4 bg-base-100 rounded-lg shadow-md border border-base-300">
      
      <button
        class="btn btn-outline btn-secondary"
        [disabled]="currentPage() === 1"
        (click)="previousPage()">
        ← Anterior
      </button>

      <span class="text-sm font-medium text-gray-600">
        Página {{ currentPage() }} de {{ totalPages() }}
      </span>

      <button
        class="btn btn-primary"
        [disabled]="currentPage() >= totalPages()"
        (click)="nextPage()">
        Siguiente →
      </button>

    </footer>
  }

  @if (pokemons.error()) {
    <div role="alert" class="alert alert-error mt-8 shadow-lg">
      <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
      <span>Error al cargar los datos de Pokémon.</span>
    </div>
  }

</section>
